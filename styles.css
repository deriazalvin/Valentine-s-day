:root{
  --bg1:#ff9a9e;
  --bg2:#fecfef;
  --accent:#ff3b6b;
  --muted:#ffd7e2;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Poppins,system-ui,Arial;background:linear-gradient(135deg,var(--bg1),var(--bg2));}
.stage{height:100%;display:flex;align-items:center;justify-content:center;padding:40px}
.card{background:rgba(255,255,255,0.06);backdrop-filter:blur(6px);border-radius:20px;padding:48px 56px;text-align:center;box-shadow:0 10px 40px rgba(0,0,0,0.18);max-width:720px;width:100%;position:relative}
.title{font-family:'Great Vibes', serif;color:white;font-size:64px;margin:0 0 6px;text-shadow:0 6px 18px rgba(0,0,0,0.35)}
.subtitle{color:rgba(255,255,255,0.9);margin:0 0 24px;font-size:18px}
.buttons{display:flex;gap:20px;justify-content:center}
.btn{padding:14px 28px;border-radius:12px;border:0;font-weight:600;cursor:pointer;outline:none;font-size:18px;transform:translateZ(0);transition:transform 180ms ease, box-shadow 180ms ease}
.btn:active{transform:translateY(2px)}
.btn-yes{background:linear-gradient(180deg,#fff 0%,#ffe6f0 100%);color:var(--accent);box-shadow:0 8px 30px rgba(255,59,107,0.18)}
.btn-no{background:transparent;color:white;border:2px solid rgba(255,255,255,0.18);box-shadow:0 8px 30px rgba(0,0,0,0.14)}
.btn-no.moved{position:absolute}

/* confetti canvas */
#confetti{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:50}
#hearts{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:40}

/* celebration styles */
body.celebrate .card{transform:scale(1.02);box-shadow:0 20px 60px rgba(0,0,0,0.35)}

/* small floating hearts */
.floating-heart{position:absolute;width:28px;height:28px;background:radial-gradient(circle at 50% 30%, #fff8, #fff0 30%),linear-gradient(180deg,#ff5b82,#ff2f6a);transform:rotate(-45deg);border-radius:14px 14px 0 0;opacity:0.95}
.floating-heart:before,.floating-heart:after{content:"";position:absolute;background:inherit;border-radius:50%;width:28px;height:28px}
.floating-heart:before{top:-14px;left:0}
/* LETTER OVERLAY */

#letterOverlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.75);
  backdrop-filter:blur(8px);
  display:flex;
  align-items:center;
  justify-content:center;
  opacity:0;
  visibility:hidden;
  transition:all 1s ease;
  z-index:100;
}

#letterOverlay.show{
  opacity:1;
  visibility:visible;
}

.letter{
  background:white;
  color:#444;
  padding:50px;
  max-width:700px;
  width:90%;
  border-radius:20px;
  box-shadow:0 30px 80px rgba(0,0,0,0.4);
  transform:scale(0.7) translateY(40px);
  opacity:0;
  animation:letterAppear 1.5s forwards ease;
}

@keyframes letterAppear{
  to{
    transform:scale(1) translateY(0);
    opacity:1;
  }
}

.letter h2{
  font-family:'Great Vibes', serif;
  font-size:42px;
  text-align:center;
  margin-bottom:25px;
  color:#ff3b6b;
}

.letter p{
  line-height:1.8;
  margin-bottom:18px;
  font-size:17px;
}

.signature{
  text-align:right;
  margin-top:25px;
  font-family:'Great Vibes', serif;
  font-size:24px;
  color:#ff3b6b;
}

.closing{
  font-weight:600;
  text-align:center;
  font-size:18px;
}

.floating-heart:after{left:14px;top:0}

@media (max-width:520px){.title{font-size:40px}.card{padding:28px}}

/* ROMANCE SCENE */

#romanceScene{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.85);
  display:flex;
  align-items:center;
  justify-content:center;
  opacity:0;
  visibility:hidden;
  transition:1s ease;
  z-index:200;
}

#romanceScene.show{
  opacity:1;
  visibility:visible;
}

/* Envelope */

.envelope{
  position:relative;
  width:320px;
  height:200px;
  background:#ff3b6b;
  border-radius:6px;
  box-shadow:0 20px 60px rgba(0,0,0,0.5);
  transform-style:preserve-3d;
  animation:popIn 1.5s ease forwards;
}

@keyframes popIn{
  from{ transform:scale(0.5) rotateY(90deg); opacity:0; }
  to{ transform:scale(1) rotateY(0); opacity:1; }
}

.flap{
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:#ff5b82;
  clip-path:polygon(0 0,100% 0,50% 60%);
  transform-origin:top;
  transition:1.2s ease;
}

.envelope.open .flap{
  transform:rotateX(180deg);
}

/* Letter */

.letterPaper{
  position:absolute;
  width:90%;
  height:260px;
  background:white;
  top:20px;
  left:5%;
  padding:20px;
  border-radius:10px;
  transform:translateY(100%);
  transition:1.5s ease;
  overflow:auto;
  font-size:15px;
  line-height:1.6;
  color:#444;
}

.envelope.open .letterPaper{
  transform:translateY(-140px);
}

#typedText{
  font-family:Poppins;
  white-space:pre-wrap;
}
/* PETALS */
#petals{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:300;
  overflow:hidden;
}

.petal{
  position:absolute;
  width:20px;
  height:20px;
  background:radial-gradient(circle at 50% 30%, #ff7bbf, #ff2f6a);
  border-radius:50%;
  opacity:0.8;
  transform:rotate(0deg);
}

/* animation p√©tales */
@keyframes fallPetal{
  0%{transform:translateY(-50px) rotate(0deg);}
  100%{transform:translateY(100vh) rotate(360deg);}
}
/* BATTEMENT DE COEUR */
body.celebrate {
  animation: heartbeat 1.2s infinite;
}

@keyframes heartbeat{
  0%,100%{ transform: scale(1); }
  25%,75%{ transform: scale(1.02); }
  50%{ transform: scale(1.04); }
}

/* LUMIERES SCINTILLANTES */
.sparkle{
  position:absolute;
  width:6px;
  height:6px;
  border-radius:50%;
  background:radial-gradient(circle,#fff,#ff6fa8);
  opacity:0.8;
  pointer-events:none;
  z-index:250;
  animation:twinkle 1.5s infinite;
}

@keyframes twinkle{
  0%,100%{ opacity:0.8; transform:scale(1); }
  50%{ opacity:0; transform:scale(1.5); }
}

/* ZOOM ENVELOPPE */
.envelope{
  position:relative;
  width:320px;
  height:200px;
  background:#ff3b6b;
  border-radius:6px;
  box-shadow:0 20px 60px rgba(0,0,0,0.5);
  transform-style:preserve-3d;
  animation:popIn 1.5s ease forwards;
  transition: transform 1.2s ease;
}

.envelope.open{
  transform: scale(1.08) rotateY(0deg);
}
/* Retour */
#backBtn{
  display:block;
  margin:20px auto 0 auto;
  background:linear-gradient(180deg,#ffe6f0,#fff);
  color:#ff3b6b;
  border:none;
  padding:10px 20px;
  border-radius:12px;
  font-size:16px;
  cursor:pointer;
  transition:transform 200ms ease, box-shadow 200ms ease;
}
#backBtn:active{transform:translateY(2px);}

/* Lettre 3D */
.envelope{
  transform-style:preserve-3d;
  perspective:800px;
}
.letterPaper{
  transform:translateY(100%) rotateX(15deg);
  transition:1.5s ease, transform 1.5s ease;
}
.envelope.open .letterPaper{
  transform:translateY(-140px) rotateX(0deg);
}

/* Petals, confetti, hearts restent identiques */

/* Sparkles, heartbeat, zoom envelope restent identiques */


